"{"name": "expensesReimbursementClaimForm", "fields": [{"field": [{"kvp": [{}], "name": "totalPerDiemClaim", "type": "DOUBLE", "caption": "Total Claim", "position": 15, "properties": [{"property": [{"name": "HELP", "type": "STRING", "value": [{"nil": "true"}], "caption": "Help"}, {"name": "TRIGGER", "type": "STRING", "value": [{"nil": "true"}], "caption": "Trigger Class"}, {"name": "MANDATORY", "type": "CHECKBOX", "value": [{"booleanValue": true}], "caption": "Mandatory"}, {"name": "NAME", "type": "STRING", "value": [{"fieldName": "NAME", "stringValue": "totalPerDiemClaim"}], "caption": "Name"}, {"name": "FORMULA", "type": "STRING", "value": [{"stringValue": "=noOfDays*amountPerDay"}], "caption": "Formula"}, {"name": "PLACEHOLDER", "type": "STRING", "value": [{"nil": "true"}], "caption": "Place Holder"}, {"name": "CAPTION", "type": "STRING", "value": [{"stringValue": "Total Claim"}], "caption": "Label Text"}, {"name": "CURRENCY", "type": "SELECTBASIC", "value": [{"fieldName": "CURRENCY", "stringValue": "KES"}], "caption": "Currency"}, {"name": "READONLY", "type": "CHECKBOX", "value": [{"booleanValue": true}], "caption": "Read Only"}, {"name": "ALIGNMENT", "type": "SELECTBASIC", "value": [{"nil": "true"}], "caption": "Alignment"}]}], "grid-columns": [{}]}, {"kvp": [{}], "name": "departmentOrbranch", "type": "SELECTBASIC", "caption": "Department/Branch", "position": 6, "properties": [{"property": [{"name": "READONLY", "type": "CHECKBOX", "value": [{"booleanValue": false}], "caption": "Read Only"}, {"name": "TRIGGER", "type": "STRING", "value": [{"stringValue": "chasebank.finance.ExpenseClaim.GetBudget"}], "caption": "Trigger Class"}, {"name": "CAPTION", "type": "STRING", "value": [{"stringValue": "Department/Branch"}], "caption": "Label Text"}, {"name": "HELP", "type": "STRING", "value": [{"nil": "true"}], "caption": "Help"}, {"name": "SQLDS", "type": "SELECTBASIC", "value": [{"fieldName": "SQLDS", "stringValue": "wiradb"}], "caption": "Data Source"}, {"name": "NAME", "type": "STRING", "value": [{"fieldName": "NAME", "stringValue": "departmentOrbranch"}], "caption": "Name"}, {"name": "SELECTIONTYPE", "type": "STRING", "value": [{"fieldName": "SELECTIONTYPE", "stringValue": "2558d6c1-aee8-4964-afbb-f9bae4f9e35d"}], "caption": "Reference"}, {"name": "MANDATORY", "type": "CHECKBOX", "value": [{"booleanValue": false}], "caption": "Mandatory"}, {"name": "SQLSELECT", "type": "STRINGLONG", "value": [{"textValue": "select code,name from ext_department;"}], "caption": "Sql"}]}], "grid-columns": [{}]}, {"kvp": [{}], "name": "attachScannedReceipts", "type": "FILEUPLOAD", "caption": "Attach Scanned Receipts", "position": 28, "properties": [{"property": [{"name": "PATH", "type": "STRING", "value": [{"stringValue": "Expense Claims/Receipt"}], "caption": "File Path"}, {"name": "MANDATORY", "type": "CHECKBOX", "value": [{"booleanValue": false}], "caption": "Mandatory"}, {"name": "READONLY", "type": "CHECKBOX", "value": [{"booleanValue": false}], "caption": "Read Only"}, {"name": "CAPTION", "type": "STRING", "value": [{"stringValue": "Attach Scanned Receipts"}], "caption": "Label Text"}, {"name": "UPLOADER", "type": "SELECTBASIC", "value": [{"fieldName": "UPLOADER", "stringValue": "multiupload"}], "caption": "Uploader"}, {"name": "UPLOADERTYPE", "type": "SELECTBASIC", "value": [{"fieldName": "UPLOADERTYPE", "stringValue": "fileuploader"}], "caption": "Type"}, {"name": "HELP", "type": "STRING", "value": [{"nil": "true"}], "caption": "Help"}, {"name": "ACCEPT", "type": "STRINGLONG", "value": [{"nil": "true"}], "caption": "Accept"}, {"name": "NAME", "type": "STRING", "value": [{"fieldName": "NAME", "stringValue": "attachScannedReceipts"}], "caption": "Name"}]}], "grid-columns": [{}]}, {"kvp": [{}], "name": "requestedBy", "type": "STRING", "caption": "Requested By", "position": 3, "properties": [{"property": [{"name": "NAME", "type": "STRING", "value": [{"stringValue": "requestedBy"}], "caption": "Name"}, {"name": "PLACEHOLDER", "type": "STRING", "value": [{"nil": "true"}], "caption": "Place Holder"}, {"name": "HELP", "type": "STRING", "value": [{"nil": "true"}], "caption": "Help"}, {"name": "MANDATORY", "type": "CHECKBOX", "value": [{"booleanValue": true}], "caption": "Mandatory"}, {"name": "ALIGNMENT", "type": "SELECTBASIC", "value": [{"nil": "true"}], "caption": "Alignment"}, {"name": "READONLY", "type": "CHECKBOX", "value": [{"booleanValue": true}], "caption": "Read Only"}, {"name": "CAPTION", "type": "STRING", "value": [{"stringValue": "Requested By"}], "caption": "Label Text"}, {"name": "TRIGGER", "type": "STRING", "value": [{"nil": "true"}], "caption": "Trigger Class"}]}], "grid-columns": [{}]}, {"kvp": [{}], "name": "amountPerPerson", "type": "DOUBLE", "caption": "Amount Per Person", "position": 11, "properties": [{"property": [{"name": "ALIGNMENT", "type": "SELECTBASIC", "value": [{"nil": "true"}], "caption": "Alignment"}, {"name": "MANDATORY", "type": "CHECKBOX", "value": [{"booleanValue": true}], "caption": "Mandatory"}, {"name": "HELP", "type": "STRING", "value": [{"nil": "true"}], "caption": "Help"}, {"name": "CAPTION", "type": "STRING", "value": [{"stringValue": "Amount Per Person"}], "caption": "Label Text"}, {"name": "TRIGGER", "type": "STRING", "value": [{"nil": "true"}], "caption": "Trigger Class"}, {"name": "CURRENCY", "type": "SELECTBASIC", "value": [{"fieldName": "CURRENCY", "stringValue": "KES"}], "caption": "Currency"}, {"name": "PLACEHOLDER", "type": "STRING", "value": [{"nil": "true"}], "caption": "Place Holder"}, {"name": "FORMULA", "type": "STRING", "value": [{"nil": "true"}], "caption": "Formula"}, {"name": "NAME", "type": "STRING", "value": [{"fieldName": "NAME", "stringValue": "amountPerPerson"}], "caption": "Name"}, {"name": "READONLY", "type": "CHECKBOX", "value": [{"booleanValue": false}], "caption": "Read Only"}]}], "grid-columns": [{}]}, {"kvp": [{}], "name": "noOfDays", "type": "DOUBLE", "caption": "No. of days", "position": 13, "properties": [{"property": [{"name": "READONLY", "type": "CHECKBOX", "value": [{"booleanValue": false}], "caption": "Read Only"}, {"name": "TRIGGER", "type": "STRING", "value": [{"nil": "true"}], "caption": "Trigger Class"}, {"name": "MANDATORY", "type": "CHECKBOX", "value": [{"booleanValue": true}], "caption": "Mandatory"}, {"name": "HELP", "type": "STRING", "value": [{"nil": "true"}], "caption": "Help"}, {"name": "NAME", "type": "STRING", "value": [{"fieldName": "NAME", "stringValue": "noOfDays"}], "caption": "Name"}, {"name": "PLACEHOLDER", "type": "STRING", "value": [{"nil": "true"}], "caption": "Place Holder"}, {"name": "CAPTION", "type": "STRING", "value": [{"stringValue": "No. of days"}], "caption": "Label Text"}, {"name": "FORMULA", "type": "STRING", "value": [{"nil": "true"}], "caption": "Formula"}, {"name": "ALIGNMENT", "type": "SELECTBASIC", "value": [{"nil": "true"}], "caption": "Alignment"}]}], "grid-columns": [{}]}, {"kvp": [{}], "name": "route", "type": "STRING", "caption": "Route", "position": 16, "properties": [{"property": [{"name": "PLACEHOLDER", "type": "STRING", "value": [{"nil": "true"}], "caption": "Place Holder"}, {"name": "READONLY", "type": "CHECKBOX", "value": [{"booleanValue": false}], "caption": "Read Only"}, {"name": "NAME", "type": "STRING", "value": [{"fieldName": "NAME", "stringValue": "route"}], "caption": "Name"}, {"name": "MANDATORY", "type": "CHECKBOX", "value": [{"booleanValue": false}], "caption": "Mandatory"}, {"name": "CAPTION", "type": "STRING", "value": [{"stringValue": "Route"}], "caption": "Label Text"}, {"name": "ALIGNMENT", "type": "SELECTBASIC", "value": [{"nil": "true"}], "caption": "Alignment"}, {"name": "HELP", "type": "STRING", "value": [{"nil": "true"}], "caption": "Help"}, {"name": "TRIGGER", "type": "STRING", "value": [{"nil": "true"}], "caption": "Trigger Class"}]}], "grid-columns": [{}]}, {"kvp": [{}], "name": "JS-ExpenseType", "type": "JS", "position": 31, "properties": [{"property": [{"name": "JavaScript", "type": "STRINGLONG", "value": [{"textValue": "/**\n * \n */\n\n\nvar selectExpense = $doc.getElementById('selectExpense');\nshowFieldsForExpenseType(selectExpense.value);\n\nselectExpense.addEventListener('change', function() {\n\tvar newValue = selectExpense.value;\n\tselectExpense.defaultValue=newValue;\n\n\tclear('noOfStaff');\n\tclear('amountPerPerson');\n\tclear('noOfDays');\n\tclear('amountPerDay');\n\tclear('route');\n\tclear('mileage');\n\tclear('fromOrigin');\n\tclear('toDestination');\n\tclear('kms');\n\tclear('rate');\n\tclear('totalPerDiemClaim');\n\tclear('totalTaxiClaim');\n\tclear('totalMealsClaim');\n\t\n\treset('noOfStaff');\n\treset('amountPerPerson');\n\treset('noOfDays');\n\treset('amountPerDay');\n\treset('kms');\n\treset('rate');\n\treset('totalPerDiemClaim');\n\treset('totalTaxiClaim');\n\treset('totalMealsClaim');\n\tshowFieldsForExpenseType(newValue);\n},false);\n\t\t\nfunction show(fieldName, show) {\n\tvar field= $doc.getElementById(fieldName);\n\tif(field!=null){\n\t\tif (show == true) {\n\t\t\tfield.style.display = 'block';\n\t\t} else {\n\t\t\tfield.style.display = 'none';\n\t\t}\n\t}else{\n\t\t$wnd.alert(fieldName+' cannot be shown - does not exist!');\n\t}\n\t\n}\n\nfunction showFieldsForExpenseType(fieldName){\n\tshow('noOfStaff_Field', false);\n\tshow('amountPerPerson_Field', false);\n\tshow('noOfDays_Field', false);\n\tshow('amountPerDay_Field', false);\n\tshow('route_Field', false);\n\tshow('mileage_Field', false);\n\tshow('fromOrigin_Field', false);\n\tshow('toDestination_Field', false);\n\tshow('kms_Field', false);\n\tshow('rate_Field', false);\n\tshow('totalMealsClaim_Field',false);\n\tshow('totalPerDiemClaim_Field',false);\n\tshow('totalTaxiClaim_Field',false);\n\t\n\t\n\tif (selectExpense.value == 'Meals') {\n\t\tshow('totalMealsClaim_Field',true);\n\t\tshow('noOfStaff_Field', true);\n\t\tshow('amountPerPerson_Field', true);\n\t} else if (selectExpense.value == 'Per diem') {\n\t\tshow('totalPerDiemClaim_Field',true);\n\t\tshow('noOfDays_Field', true);\n\t\tshow('amountPerDay_Field', true);\n\t} else if (selectExpense.value == 'Taxi') {\n\t\tshow('totalTaxiClaim_Field',true);\n\t\tshow('route_Field', true);\n\t\tshow('mileage_Field', true);\n\t\tshow('fromOrigin_Field', true);\n\t\tshow('toDestination_Field', true);\n\t\tshow('kms_Field', true);\n\t\tshow('rate_Field', true);\n\t}\n}\n\nfunction reset(componentName){\n\t$wnd.setFieldValue(componentName, '0');\n}\n\nfunction clear(componentName){\n\tif($doc.getElementById(componentName)!=null){\n\t\t$doc.getElementById(componentName).value = '';\n\t\t$doc.getElementById(componentName).defaultValue = '';\n\t\t\n\t}else{\n\t\t$wnd.alert(componentName+' Does not exist!');\n\t}\n\t\n\t\n\tif($doc.getElementById(componentName+\"_View\")!=null){\n\t\t$doc.getElementById(componentName+\"_View\").innerHTML = '';\n\t}\n}"}], "caption": "Content"}, {"name": "HELP", "type": "STRING", "value": [{"nil": "true"}], "caption": "Help"}, {"name": "NAME", "type": "STRING", "value": [{"stringValue": "JS-ExpenseType"}], "caption": "Name"}]}], "grid-columns": [{}]}, {"kvp": [{}], "name": "dateRequested", "type": "DATE", "caption": "Date Requested", "position": 4, "properties": [{"property": [{"name": "DATEFORMAT", "type": "STRING", "value": [{"nil": "true"}], "caption": "Date Format"}, {"name": "NAME", "type": "STRING", "value": [{"fieldName": "NAME", "stringValue": "dateRequested"}], "caption": "Name"}, {"name": "CAPTION", "type": "STRING", "value": [{"stringValue": "Date Requested"}], "caption": "Label Text"}, {"name": "READONLY", "type": "CHECKBOX", "value": [{"booleanValue": true}], "caption": "Read Only"}, {"name": "MANDATORY", "type": "CHECKBOX", "value": [{"booleanValue": true}], "caption": "Mandatory"}, {"name": "HELP", "type": "STRING", "value": [{"nil": "true"}], "caption": "Help"}]}], "grid-columns": [{}]}, {"kvp": [{}], "name": "noOfStaff", "type": "DOUBLE", "caption": "No. of Staff", "position": 10, "properties": [{"property": [{"name": "CAPTION", "type": "STRING", "value": [{"stringValue": "No. of Staff"}], "caption": "Label Text"}, {"name": "HELP", "type": "STRING", "value": [{"nil": "true"}], "caption": "Help"}, {"name": "ALIGNMENT", "type": "SELECTBASIC", "value": [{"nil": "true"}], "caption": "Alignment"}, {"name": "FORMULA", "type": "STRING", "value": [{"nil": "true"}], "caption": "Formula"}, {"name": "READONLY", "type": "CHECKBOX", "value": [{"booleanValue": false}], "caption": "Read Only"}, {"name": "PLACEHOLDER", "type": "STRING", "value": [{"nil": "true"}], "caption": "Place Holder"}, {"name": "NAME", "type": "STRING", "value": [{"fieldName": "NAME", "stringValue": "noOfStaff"}], "caption": "Name"}, {"name": "TRIGGER", "type": "STRING", "value": [{"nil": "true"}], "caption": "Trigger Class"}, {"name": "MANDATORY", "type": "CHECKBOX", "value": [{"booleanValue": true}], "caption": "Mandatory"}]}], "grid-columns": [{}]}, {"kvp": [{}], "name": "claimNo", "type": "STRING", "caption": "Claim No", "position": 2, "properties": [{"property": [{"name": "TRIGGER", "type": "STRING", "value": [{"nil": "true"}], "caption": "Trigger Class"}, {"name": "NAME", "type": "STRING", "value": [{"fieldName": "NAME", "stringValue": "claimNo"}], "caption": "Name"}, {"name": "MANDATORY", "type": "CHECKBOX", "value": [{"booleanValue": true}], "caption": "Mandatory"}, {"name": "PLACEHOLDER", "type": "STRING", "value": [{"nil": "true"}], "caption": "Place Holder"}, {"name": "READONLY", "type": "CHECKBOX", "value": [{"booleanValue": true}], "caption": "Read Only"}, {"name": "CAPTION", "type": "STRING", "value": [{"stringValue": "Claim No"}], "caption": "Label Text"}, {"name": "HELP", "type": "STRING", "value": [{"nil": "true"}], "caption": "Help"}, {"name": "ALIGNMENT", "type": "SELECTBASIC", "value": [{"nil": "true"}], "caption": "Alignment"}]}], "grid-columns": [{}]}, {"kvp": [{}], "name": "kms", "type": "DOUBLE", "caption": "KMs", "position": 22, "properties": [{"property": [{"name": "READONLY", "type": "CHECKBOX", "value": [{"booleanValue": false}], "caption": "Read Only"}, {"name": "CAPTION", "type": "STRING", "value": [{"stringValue": "KMs"}], "caption": "Label Text"}, {"name": "HELP", "type": "STRING", "value": [{"nil": "true"}], "caption": "Help"}, {"name": "FORMULA", "type": "STRING", "value": [{"nil": "true"}], "caption": "Formula"}, {"name": "MANDATORY", "type": "CHECKBOX", "value": [{"booleanValue": true}], "caption": "Mandatory"}, {"name": "TRIGGER", "type": "STRING", "value": [{"nil": "true"}], "caption": "Trigger Class"}, {"name": "ALIGNMENT", "type": "SELECTBASIC", "value": [{"nil": "true"}], "caption": "Alignment"}, {"name": "NAME", "type": "STRING", "value": [{"fieldName": "NAME", "stringValue": "kms"}], "caption": "Name"}, {"name": "PLACEHOLDER", "type": "STRING", "value": [{"nil": "true"}], "caption": "Place Holder"}]}], "grid-columns": [{}]}, {"kvp": [{}], "name": "Note:", "type": "LABEL", "position": 27, "properties": [{"property": [{"name": "NAME", "type": "STRING", "value": [{"stringValue": "Note:"}], "caption": "Name"}, {"name": "HELP", "type": "STRING", "value": [{"nil": "true"}], "caption": "Help"}, {"name": "STATICCONTENT", "type": "STRINGLONG", "value": [{"textValue": "Note: <b>Receipts MUST be attached for approval and payment.</b>"}], "caption": "Content"}]}], "grid-columns": [{}]}, {"kvp": [{}], "name": "natureOfExpense", "type": "LAYOUTHR", "caption": "Nature of Expense", "position": 8, "properties": [{"property": [{"name": "HELP", "type": "STRING", "value": [{"nil": "true"}], "caption": "Help"}, {"name": "NAME", "type": "STRING", "value": [{"fieldName": "NAME", "stringValue": "natureOfExpense"}], "caption": "Name"}, {"name": "SECTION", "type": "STRING", "value": [{"nil": "true"}], "caption": "Section Name"}, {"name": "CAPTION", "type": "STRING", "value": [{"stringValue": "Nature of Expense"}], "caption": "Label Text"}]}], "grid-columns": [{}]}, {"kvp": [{}], "name": "purpose", "type": "STRINGLONG", "caption": "Purpose", "position": 5, "properties": [{"property": [{"name": "MANDATORY", "type": "CHECKBOX", "value": [{"booleanValue": true}], "caption": "Mandatory"}, {"name": "READONLY", "type": "CHECKBOX", "value": [{"booleanValue": false}], "caption": "Read Only"}, {"name": "LABELPOSITION", "type": "SELECTBASIC", "value": [{"nil": "true"}], "caption": "Label Position"}, {"name": "NAME", "type": "STRING", "value": [{"fieldName": "NAME", "stringValue": "purpose"}], "caption": "Name"}, {"name": "PLACEHOLDER", "type": "STRING", "value": [{"stringValue": "Purpose of Travel and /or Expense"}], "caption": "Place Holder"}, {"name": "CAPTION", "type": "STRING", "value": [{"stringValue": "Purpose"}], "caption": "Label Text"}, {"name": "HELP", "type": "STRING", "value": [{"nil": "true"}], "caption": "Help"}]}], "grid-columns": [{}]}, {"kvp": [{}], "name": "mileage", "type": "DOUBLE", "caption": "Mileage", "position": 17, "properties": [{"property": [{"name": "MANDATORY", "type": "CHECKBOX", "value": [{"booleanValue": false}], "caption": "Mandatory"}, {"name": "FORMULA", "type": "STRING", "value": [{"nil": "true"}], "caption": "Formula"}, {"name": "CAPTION", "type": "STRING", "value": [{"stringValue": "Mileage"}], "caption": "Label Text"}, {"name": "TRIGGER", "type": "STRING", "value": [{"nil": "true"}], "caption": "Trigger Class"}, {"name": "ALIGNMENT", "type": "SELECTBASIC", "value": [{"nil": "true"}], "caption": "Alignment"}, {"name": "HELP", "type": "STRING", "value": [{"nil": "true"}], "caption": "Help"}, {"name": "READONLY", "type": "CHECKBOX", "value": [{"booleanValue": false}], "caption": "Read Only"}, {"name": "PLACEHOLDER", "type": "STRING", "value": [{"nil": "true"}], "caption": "Place Holder"}, {"name": "NAME", "type": "STRING", "value": [{"fieldName": "NAME", "stringValue": "mileage"}], "caption": "Name"}]}], "grid-columns": [{}]}, {"kvp": [{}], "name": "totalTaxiClaim", "type": "DOUBLE", "caption": "Total Claim", "position": 24, "properties": [{"property": [{"name": "CURRENCY", "type": "SELECTBASIC", "value": [{"fieldName": "CURRENCY", "stringValue": "KES"}], "caption": "Currency"}, {"name": "PLACEHOLDER", "type": "STRING", "value": [{"nil": "true"}], "caption": "Place Holder"}, {"name": "FORMULA", "type": "STRING", "value": [{"stringValue": "=rate*kms"}], "caption": "Formula"}, {"name": "READONLY", "type": "CHECKBOX", "value": [{"booleanValue": true}], "caption": "Read Only"}, {"name": "ALIGNMENT", "type": "SELECTBASIC", "value": [{"nil": "true"}], "caption": "Alignment"}, {"name": "HELP", "type": "STRING", "value": [{"nil": "true"}], "caption": "Help"}, {"name": "NAME", "type": "STRING", "value": [{"fieldName": "NAME", "stringValue": "totalTaxiClaim"}], "caption": "Name"}, {"name": "MANDATORY", "type": "CHECKBOX", "value": [{"booleanValue": true}], "caption": "Mandatory"}, {"name": "TRIGGER", "type": "STRING", "value": [{"nil": "true"}], "caption": "Trigger Class"}, {"name": "CAPTION", "type": "STRING", "value": [{"stringValue": "Total Claim"}], "caption": "Label Text"}]}], "grid-columns": [{}]}, {"kvp": [{}], "name": "JS-AmountControls", "type": "JS", "position": 32, "properties": [{"property": [{"name": "HELP", "type": "STRING", "value": [{"nil": "true"}], "caption": "Help"}, {"name": "JavaScript", "type": "STRINGLONG", "value": [{"textValue": "/**\n * \n */\n\nvar taxiRate = $doc.getElementById('rate');\ntaxiRate.addEventListener('change', function() {\n\tif(taxiRate.value!=null && parseFloat(taxiRate.value.replace(',',''))>150){\n\t\t$wnd.alert(\"Maximum rate for taxi is 150ksh/Km\");\n\t\ttaxiRate.value=0;\n\t\ttaxiRate.defaultValue=0;\n\t\tclear('totalTaxiClaim_View');\n\t\tclear('totalTaxiClaim');\n\t\t$wnd.setFieldValue('totalTaxiClaim', '0');\n\t\t$wnd.setFieldValue('rate', '0');\n\t}\n},false);\n\nvar mealRate = $doc.getElementById('amountPerPerson');\nmealRate.addEventListener('change', function() {\n\tif(mealRate.value!=null && parseFloat(mealRate.value.replace(',',''))>2000){\n\t\t$wnd.alert(\"Maximum amount refundable for client entertainment is Ksh 2,000\");\n\t\tmealRate.value=0;\n\t\tmealRate.defaultValue=0;\n\t\tclear('totalMealsClaim_View');\n\t\tclear('totalMealsClaim');\n\t\t$wnd.setFieldValue('totalMealsClaim', '0');\n\t\t$wnd.setFieldValue('amountPerPerson', '0');\n\t}\n},false);\n\n\nfunction clear(componentName){\n\tif($doc.getElementById(componentName)!=null){\n\t\t$doc.getElementById(componentName).value = '';\n\t\t$doc.getElementById(componentName).defaultValue = '';\n\t}else{\n\t\t$wnd.alert(componentName+' Does not exist!');\n\t}\n\t\n\tif($doc.getElementById(componentName+\"_View\")!=null){\n\t\t$doc.getElementById(componentName+\"_View\").innerHTML = '';\n\t}\n}"}], "caption": "Content"}, {"name": "NAME", "type": "STRING", "value": [{"stringValue": "JS-AmountControls"}], "caption": "Name"}]}], "grid-columns": [{}]}, {"kvp": [{}], "name": "fromOrigin", "type": "STRING", "caption": "From", "position": 20, "properties": [{"property": [{"name": "CAPTION", "type": "STRING", "value": [{"stringValue": "From"}], "caption": "Label Text"}, {"name": "ALIGNMENT", "type": "SELECTBASIC", "value": [{"nil": "true"}], "caption": "Alignment"}, {"name": "NAME", "type": "STRING", "value": [{"fieldName": "NAME", "stringValue": "fromOrigin"}], "caption": "Name"}, {"name": "PLACEHOLDER", "type": "STRING", "value": [{"nil": "true"}], "caption": "Place Holder"}, {"name": "READONLY", "type": "CHECKBOX", "value": [{"booleanValue": false}], "caption": "Read Only"}, {"name": "MANDATORY", "type": "CHECKBOX", "value": [{"booleanValue": false}], "caption": "Mandatory"}, {"name": "HELP", "type": "STRING", "value": [{"nil": "true"}], "caption": "Help"}, {"name": "TRIGGER", "type": "STRING", "value": [{"nil": "true"}], "caption": "Trigger Class"}]}], "grid-columns": [{}]}, {"kvp": [{}], "name": "costCenterCode", "type": "SELECTBASIC", "caption": "Cost Center Code", "position": 7, "properties": [{"property": [{"name": "HELP", "type": "STRING", "value": [{"stringValue": "Cost center codes"}], "caption": "Help"}, {"name": "CAPTION", "type": "STRING", "value": [{"stringValue": "Cost Center Code"}], "caption": "Label Text"}, {"name": "SELECTIONTYPE", "type": "STRING", "value": [{"fieldName": "SELECTIONTYPE", "stringValue": "78e4cfbb-f64e-4c38-b3c4-141f75bce2ac"}], "caption": "Reference"}, {"name": "NAME", "type": "STRING", "value": [{"fieldName": "NAME", "stringValue": "costCenterCode"}], "caption": "Name"}, {"name": "MANDATORY", "type": "CHECKBOX", "value": [{"booleanValue": true}], "caption": "Mandatory"}, {"name": "READONLY", "type": "CHECKBOX", "value": [{"booleanValue": false}], "caption": "Read Only"}, {"name": "SQLSELECT", "type": "STRINGLONG", "value": [{"textValue": "select code,concat(code,'-',name) from ext_costcenter"}], "caption": "Sql"}, {"name": "TRIGGER", "type": "STRING", "value": [{"nil": "true"}], "caption": "Trigger Class"}, {"name": "SQLDS", "type": "SELECTBASIC", "value": [{"fieldName": "SQLDS", "stringValue": "wiradb"}], "caption": "Data Source"}]}], "grid-columns": [{}]}, {"kvp": [{}], "name": "budgetAmount", "type": "DOUBLE", "caption": "Available Budget", "position": 25, "properties": [{"property": [{"name": "ALIGNMENT", "type": "SELECTBASIC", "value": [{"nil": "true"}], "caption": "Alignment"}, {"name": "NAME", "type": "STRING", "value": [{"fieldName": "NAME", "stringValue": "budgetAmount"}], "caption": "Name"}, {"name": "FORMULA", "type": "STRING", "value": [{"nil": "true"}], "caption": "Formula"}, {"name": "HELP", "type": "STRING", "value": [{"nil": "true"}], "caption": "Help"}, {"name": "CURRENCY", "type": "SELECTBASIC", "value": [{"fieldName": "CURRENCY", "stringValue": "KES"}], "caption": "Currency"}, {"name": "TRIGGER", "type": "STRING", "value": [{"nil": "true"}], "caption": "Trigger Class"}, {"name": "CAPTION", "type": "STRING", "value": [{"stringValue": "Available Budget"}], "caption": "Label Text"}, {"name": "MANDATORY", "type": "CHECKBOX", "value": [{"booleanValue": true}], "caption": "Mandatory"}, {"name": "READONLY", "type": "CHECKBOX", "value": [{"booleanValue": true}], "caption": "Read Only"}, {"name": "PLACEHOLDER", "type": "STRING", "value": [{"nil": "true"}], "caption": "Place Holder"}]}], "grid-columns": [{}]}, {"kvp": [{}], "name": "JS-BudgetAmount", "type": "JS", "position": 29, "properties": [{"property": [{"name": "HELP", "type": "STRING", "value": [{"nil": "true"}], "caption": "Help"}, {"name": "JavaScript", "type": "STRINGLONG", "value": [{"textValue": "/*$doc.getElementById('budgetAmount_Field').style.visibility='hidden';*/"}], "caption": "Content"}, {"name": "NAME", "type": "STRING", "value": [{"stringValue": "JS-BudgetAmount"}], "caption": "Name"}]}], "grid-columns": [{}]}, {"kvp": [{}], "name": "toDestination", "type": "STRING", "caption": "To", "position": 21, "properties": [{"property": [{"name": "HELP", "type": "STRING", "value": [{"nil": "true"}], "caption": "Help"}, {"name": "MANDATORY", "type": "CHECKBOX", "value": [{"booleanValue": false}], "caption": "Mandatory"}, {"name": "TRIGGER", "type": "STRING", "value": [{"nil": "true"}], "caption": "Trigger Class"}, {"name": "CAPTION", "type": "STRING", "value": [{"stringValue": "To"}], "caption": "Label Text"}, {"name": "ALIGNMENT", "type": "SELECTBASIC", "value": [{"nil": "true"}], "caption": "Alignment"}, {"name": "NAME", "type": "STRING", "value": [{"fieldName": "NAME", "stringValue": "toDestination"}], "caption": "Name"}, {"name": "PLACEHOLDER", "type": "STRING", "value": [{"nil": "true"}], "caption": "Place Holder"}, {"name": "READONLY", "type": "CHECKBOX", "value": [{"booleanValue": false}], "caption": "Read Only"}]}], "grid-columns": [{}]}, {"kvp": [{}], "name": "attachments", "type": "LAYOUTHR", "caption": "Attachments", "position": 26, "properties": [{"property": [{"name": "NAME", "type": "STRING", "value": [{"fieldName": "NAME", "stringValue": "attachments"}], "caption": "Name"}, {"name": "SECTION", "type": "STRING", "value": [{"nil": "true"}], "caption": "Section Name"}, {"name": "HELP", "type": "STRING", "value": [{"nil": "true"}], "caption": "Help"}, {"name": "CAPTION", "type": "STRING", "value": [{"stringValue": "Attachments"}], "caption": "Label Text"}]}], "grid-columns": [{}]}, {"kvp": [{}], "name": "totalMealsClaim", "type": "DOUBLE", "caption": "Total Claim", "position": 12, "properties": [{"property": [{"name": "TRIGGER", "type": "STRING", "value": [{"nil": "true"}], "caption": "Trigger Class"}, {"name": "CAPTION", "type": "STRING", "value": [{"stringValue": "Total Claim"}], "caption": "Label Text"}, {"name": "NAME", "type": "STRING", "value": [{"fieldName": "NAME", "stringValue": "totalMealsClaim"}], "caption": "Name"}, {"name": "PLACEHOLDER", "type": "STRING", "value": [{"nil": "true"}], "caption": "Place Holder"}, {"name": "FORMULA", "type": "STRING", "value": [{"stringValue": "=(amountPerPerson*noOfStaff)"}], "caption": "Formula"}, {"name": "CURRENCY", "type": "SELECTBASIC", "value": [{"fieldName": "CURRENCY", "stringValue": "KES"}], "caption": "Currency"}, {"name": "ALIGNMENT", "type": "SELECTBASIC", "value": [{"nil": "true"}], "caption": "Alignment"}, {"name": "HELP", "type": "STRING", "value": [{"nil": "true"}], "caption": "Help"}, {"name": "READONLY", "type": "CHECKBOX", "value": [{"booleanValue": true}], "caption": "Read Only"}, {"name": "MANDATORY", "type": "CHECKBOX", "value": [{"booleanValue": true}], "caption": "Mandatory"}]}], "grid-columns": [{}]}, {"kvp": [{}], "name": "rate", "type": "DOUBLE", "caption": "Rate", "position": 23, "properties": [{"property": [{"name": "FORMULA", "type": "STRING", "value": [{"nil": "true"}], "caption": "Formula"}, {"name": "ALIGNMENT", "type": "SELECTBASIC", "value": [{"nil": "true"}], "caption": "Alignment"}, {"name": "MANDATORY", "type": "CHECKBOX", "value": [{"booleanValue": true}], "caption": "Mandatory"}, {"name": "CURRENCY", "type": "SELECTBASIC", "value": [{"fieldName": "CURRENCY", "stringValue": "KES"}], "caption": "Currency"}, {"name": "TRIGGER", "type": "STRING", "value": [{"nil": "true"}], "caption": "Trigger Class"}, {"name": "READONLY", "type": "CHECKBOX", "value": [{"booleanValue": false}], "caption": "Read Only"}, {"name": "HELP", "type": "STRING", "value": [{"nil": "true"}], "caption": "Help"}, {"name": "PLACEHOLDER", "type": "STRING", "value": [{"nil": "true"}], "caption": "Place Holder"}, {"name": "NAME", "type": "STRING", "value": [{"fieldName": "NAME", "stringValue": "rate"}], "caption": "Name"}, {"name": "CAPTION", "type": "STRING", "value": [{"stringValue": "Rate"}], "caption": "Label Text"}]}], "grid-columns": [{}]}, {"kvp": [{}], "name": "selectExpense", "type": "SELECTBASIC", "caption": "Select Expense", "position": 9, "properties": [{"property": [{"name": "TRIGGER", "type": "STRING", "value": [{"stringValue": "chasebank.finance.ExpenseClaim.GetBudget"}], "caption": "Trigger Class"}, {"name": "NAME", "type": "STRING", "value": [{"fieldName": "NAME", "stringValue": "selectExpense"}], "caption": "Name"}, {"name": "HELP", "type": "STRING", "value": [{"nil": "true"}], "caption": "Help"}, {"name": "SELECTIONTYPE", "type": "STRING", "value": [{"fieldName": "SELECTIONTYPE", "stringValue": "3359415c-6fa0-415c-b4ac-cb5739338d94"}], "caption": "Reference"}, {"name": "CAPTION", "type": "STRING", "value": [{"stringValue": "Select Expense"}], "caption": "Label Text"}, {"name": "MANDATORY", "type": "CHECKBOX", "value": [{"booleanValue": true}], "caption": "Mandatory"}, {"name": "SQLSELECT", "type": "STRINGLONG", "value": [{"nil": "true"}], "caption": "Sql"}, {"name": "SQLDS", "type": "SELECTBASIC", "value": [{"nil": "true"}], "caption": "Data Source"}, {"name": "READONLY", "type": "CHECKBOX", "value": [{"booleanValue": false}], "caption": "Read Only"}]}], "grid-columns": [{}]}, {"kvp": [{}], "name": "amountPerDay", "type": "DOUBLE", "caption": "Amount Per Day", "position": 14, "properties": [{"property": [{"name": "ALIGNMENT", "type": "SELECTBASIC", "value": [{"nil": "true"}], "caption": "Alignment"}, {"name": "TRIGGER", "type": "STRING", "value": [{"nil": "true"}], "caption": "Trigger Class"}, {"name": "MANDATORY", "type": "CHECKBOX", "value": [{"booleanValue": true}], "caption": "Mandatory"}, {"name": "NAME", "type": "STRING", "value": [{"fieldName": "NAME", "stringValue": "amountPerDay"}], "caption": "Name"}, {"name": "FORMULA", "type": "STRING", "value": [{"nil": "true"}], "caption": "Formula"}, {"name": "HELP", "type": "STRING", "value": [{"nil": "true"}], "caption": "Help"}, {"name": "PLACEHOLDER", "type": "STRING", "value": [{"nil": "true"}], "caption": "Place Holder"}, {"name": "CURRENCY", "type": "SELECTBASIC", "value": [{"fieldName": "CURRENCY", "stringValue": "KES"}], "caption": "Currency"}, {"name": "CAPTION", "type": "STRING", "value": [{"stringValue": "Amount Per Day"}], "caption": "Label Text"}, {"name": "READONLY", "type": "CHECKBOX", "value": [{"booleanValue": false}], "caption": "Read Only"}]}], "grid-columns": [{}]}, {"kvp": [{}], "name": "JS-BudgetAmountField", "type": "JS", "position": 30, "properties": [{"property": [{"name": "JavaScript", "type": "STRINGLONG", "value": [{"textValue": "/*$doc.getElementById('budgetAmount_Field').style.visibility='hidden';*/\n\n\n\nvar totalClaim= 0.0;\nvar selectExpense = $doc.getElementById('selectExpense');\n\n//Taxi\nvar taxiRate = $doc.getElementById('rate');\ntaxiRate.addEventListener('change', highlightBudget);\n\nvar kms = $doc.getElementById('kms');\nkms.addEventListener('change', highlightBudget);\n\n//Meals\nvar mealRate = $doc.getElementById('amountPerPerson');\nmealRate.addEventListener('change', highlightBudget);\n\nvar noOfStaff = $doc.getElementById('noOfStaff');\nnoOfStaff.addEventListener('change', highlightBudget);\n\n//Per Diem\nvar noOfDays = $doc.getElementById('noOfDays');\nnoOfDays.addEventListener('change', highlightBudget);\n\nvar amountPerDay = $doc.getElementById('amountPerDay');\namountPerDay.addEventListener('change', highlightBudget);\n\n\nhighlightBudget();\n\nfunction highlightBudget() {\n\tvar budgetField =$doc.getElementById('budgetAmount_Field');\n\tvar budgetView =$doc.getElementById('budgetAmount_View');\n\tvar budgetInput =$doc.getElementById('budgetAmount');\n\tvar budgetAmount =0.0;\n\tif(budgetInput.value!=null){\n\t\tvar numberValue = budgetInput.value.replace(',','');\n\t\tif(numberValue.indexOf('(')!=-1){\n\t\t\t//-ve numbers\n\t\t\tnumberValue=numberValue.replace('(','');//-ve numbers in gwt number input\n\t\t\tnumberValue=numberValue.replace(')','');\n\t\t\tnumberValue='-'+numberValue;\n\t\t\t//$wnd.alert('Value ='+numberValue);\n\t\t}\n\t\tbudgetAmount=parseFloat(numberValue);\n\t\t\n\t}\n\tsetTotalClaim();\n\n\t//$wnd.alert('BudgetAmount='+budgetAmount+' ; totalClaim='+totalClaim);\n\tif(budgetAmount<0 || ((budgetAmount==0 || budgetAmount<totalClaim) && selectExpense.value!='')){\n\t\tbudgetField.style.background='orange';\n\t\t\n\t\tvar spnInsBudget = $doc.getElementById('insufficientBudgetStatement');\n\t\tif(spnInsBudget==undefined || spnInsBudget==null){\n\t\t\tbudgetView.innerHTML=budgetView.innerHTML+\"<span id='insufficientBudgetStatement'>&nbsp;&nbsp;Insufficient Budget</span>\";\n\t\t\tbudgetField.title='You have insufficient budget for this request';\n\t\t}\n\t}else{\n\t\tbudgetField.style.background='white';\n\t\tbudgetField.title='Available Budget';\n\t}\n\n}\n\nfunction setTotalClaim(){\n\tif (selectExpense.value == 'Meals') {\n\t\ttotalClaim=parseFloat($doc.getElementById('totalMealsClaim').value.replace(',',''));\n\t} else if (selectExpense.value == 'Per diem') {\n\t\ttotalClaim=parseFloat($doc.getElementById('totalPerDiemClaim').value.replace(',',''));\n\t} else if (selectExpense.value == 'Taxi') {\n\t\ttotalClaim=parseFloat($doc.getElementById('totalTaxiClaim').value.replace(',',''));\n\t}\n}"}], "caption": "Content"}, {"name": "HELP", "type": "STRING", "value": [{"nil": "true"}], "caption": "Help"}, {"name": "NAME", "type": "STRING", "value": [{"stringValue": "JS-BudgetAmountField"}], "caption": "Name"}]}], "grid-columns": [{}]}]}], "caption": "EXPENSES REIMBURSEMENT CLAIM FORM", "properties": [{"property": [{"name": "HELP", "type": "STRINGLONG", "value": [{"nil": "true"}], "caption": "Help"}, {"name": "NAME", "type": "STRING", "value": [{"stringValue": "expensesReimbursementClaimForm"}], "caption": "Form ID"}, {"name": "CAPTION", "type": "STRING", "value": [{"stringValue": "EXPENSES REIMBURSEMENT CLAIM FORM"}], "caption": "Caption"}]}], "processDefId": 2}"